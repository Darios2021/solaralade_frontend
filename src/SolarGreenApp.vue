<template>
  <v-app class="solar-green-app">
    <v-main class="bg-grey-lighten-5">
      <!-- HERO -->
      <section class="bg-white">
        <v-container class="py-12 py-md-16 text-center">
          <div class="text-h4 text-md-h3 font-weight-bold hero-title mb-3">
            Bienvenido a ALADE Green
          </div>
          <div
            class="text-subtitle-1 text-medium-emphasis mb-8 mx-auto hero-subtitle"
          >
            La energ√≠a solar para hogares y comercios con la calidad de Grupo
            Alade. Conoc√© c√≥mo funciona un sistema de paneles solares, estim√° tu
            ahorro y dej√° tus datos para que un asesor te acompa√±e en todo el
            proceso.
          </div>

          <v-btn
            color="primary"
            size="large"
            class="px-8 py-3 text-button"
            @click="scrollToCalculator"
          >
            CALCULAR MI AHORRO
          </v-btn>
        </v-container>
      </section>

      <!-- BENEFICIOS PRINCIPALES -->
      <section>
        <v-container class="py-10">
          <div class="section-title text-center mb-6">
            ¬øPor qu√© instalar un sistema de paneles solares?
          </div>

          <v-row dense align="stretch">
            <v-col cols="12" md="4">
              <v-card class="h-100 benefit-card" elevation="2">
                <v-card-text class="py-6">
                  <div class="benefit-title">
                    Ahorro econ√≥mico
                  </div>
                  <div class="text-body-2 text-medium-emphasis">
                    Un sistema fotovoltaico genera parte de la energ√≠a que
                    consum√≠s todos los meses. Eso se traduce en menor
                    dependencia de la red y una reducci√≥n progresiva de la
                    factura el√©ctrica.
                  </div>
                </v-card-text>
              </v-card>
            </v-col>

            <v-col cols="12" md="4">
              <v-card class="h-100 benefit-card" elevation="2">
                <v-card-text class="py-6">
                  <div class="benefit-title">
                    Sustentabilidad
                  </div>
                  <div class="text-body-2 text-medium-emphasis">
                    La energ√≠a solar es renovable y limpia. Al generar parte de
                    tu consumo a partir del sol, reduc√≠s tu huella de carbono y
                    contribu√≠s a un modelo energ√©tico m√°s responsable.
                  </div>
                </v-card-text>
              </v-card>
            </v-col>

            <v-col cols="12" md="4">
              <v-card class="h-100 benefit-card" elevation="2">
                <v-card-text class="py-6">
                  <div class="benefit-title">
                    Confort y previsibilidad
                  </div>
                  <div class="text-body-2 text-medium-emphasis">
                    Un sistema bien dimensionado te da previsibilidad de costos
                    a mediano y largo plazo, y puede integrarse con soluciones
                    de respaldo frente a cortes de energ√≠a.
                  </div>
                </v-card-text>
              </v-card>
            </v-col>
          </v-row>
        </v-container>
      </section>

      <!-- SECCI√ìN CALCULADORA + FORMULARIO -->
      <section id="green-calculator-section" class="bg-grey-lighten-4">
        <v-container class="py-10 d-flex justify-center">
          <div id="solar-calculator" class="form-wrapper">
            <v-card class="form-card" elevation="8">
              <div class="form-header">
                <span class="form-chip">Simulador inicial</span>
                <h2 class="form-title">
                  Cotiz√° tu instalaci√≥n solar
                </h2>
                <p class="form-subtitle">
                  Complet√° unos datos y te ayudamos a estimar el sistema de
                  paneles adecuado para tu hogar o comercio.
                </p>

                <div class="view-tabs">
                  <button
                    type="button"
                    class="view-tab"
                    :class="{ active: activeView === 'form' }"
                    @click="activeView = 'form'"
                  >
                    Dejar mis datos
                  </button>

                  <button
                    type="button"
                    class="view-tab"
                    :class="{ active: activeView === 'calc' }"
                    @click="activeView = 'calc'"
                  >
                    Calcular consumo
                  </button>
                </div>
              </div>

              <SolarLeadForm v-show="activeView === 'form'" />
              <ConsumptionCalculator v-show="activeView === 'calc'" />

              <div class="more-info-wrap">
                <v-btn
                  variant="text"
                  class="more-info-btn"
                  @click="scrollToInfo"
                >
                  Quiero saber m√°s sobre energ√≠a solar
                </v-btn>
              </div>
            </v-card>
          </div>
        </v-container>
      </section>

      <!-- C√ìMO FUNCIONA UN SISTEMA SOLAR -->
      <section ref="infoSection" class="bg-white">
        <v-container class="py-10">
          <div class="section-title text-center mb-8">
            ¬øC√≥mo funciona un sistema de paneles solares?
          </div>

          <v-row>
            <v-col cols="12" md="4">
              <h3 class="step-title">
                1. Captaci√≥n de energ√≠a
              </h3>
              <p class="text-body-2 text-medium-emphasis">
                Los paneles fotovoltaicos convierten la radiaci√≥n solar en
                energ√≠a el√©ctrica de corriente continua (CC). Se colocan en
                techos o estructuras con buena exposici√≥n al sol.
              </p>
            </v-col>

            <v-col cols="12" md="4">
              <h3 class="step-title">
                2. Conversi√≥n e integraci√≥n
              </h3>
              <p class="text-body-2 text-medium-emphasis">
                Un inversor transforma esa energ√≠a en corriente alterna (CA),
                compatible con la instalaci√≥n el√©ctrica convencional. El sistema
                se conecta a tu tablero existente.
              </p>
            </v-col>

            <v-col cols="12" md="4">
              <h3 class="step-title">
                3. Uso y monitoreo
              </h3>
              <p class="text-body-2 text-medium-emphasis">
                La energ√≠a generada se utiliza en tiempo real y, seg√∫n la
                normativa local, puede complementarse con la red y sistemas de
                medici√≥n bidireccional. Es posible monitorear producci√≥n y
                ahorro desde apps o portales web.
              </p>
            </v-col>
          </v-row>
        </v-container>
      </section>

      <!-- PREGUNTAS FRECUENTES -->
      <section>
        <v-container class="py-10">
          <div class="section-title text-center mb-6">
            Preguntas frecuentes
          </div>

          <!-- wrapper para poder pisar estilos de WP -->
          <div class="faq-wrapper">
            <v-expansion-panels
              variant="accordion"
              class="faq-panels"
            >
              <v-expansion-panel class="faq-item" elevation="0">
                <v-expansion-panel-title>
                  ¬øTengo que cambiar toda mi instalaci√≥n el√©ctrica?
                </v-expansion-panel-title>
                <v-expansion-panel-text class="text-body-2 text-medium-emphasis">
                  No. El sistema se integra a tu tablero actual. S√≥lo se hacen
                  adecuaciones puntuales para garantizar seguridad y
                  funcionamiento √≥ptimo seg√∫n la normativa vigente.
                </v-expansion-panel-text>
              </v-expansion-panel>

              <v-expansion-panel class="faq-item" elevation="0">
                <v-expansion-panel-title>
                  ¬øQu√© pasa cuando est√° nublado o es de noche?
                </v-expansion-panel-title>
                <v-expansion-panel-text class="text-body-2 text-medium-emphasis">
                  La generaci√≥n baja cuando hay poca radiaci√≥n, y es nula de
                  noche. Por eso el sistema trabaja en conjunto con la red
                  el√©ctrica convencional y, si lo dese√°s, con bater√≠as de
                  respaldo.
                </v-expansion-panel-text>
              </v-expansion-panel>

              <v-expansion-panel class="faq-item" elevation="0">
                <v-expansion-panel-title>
                  ¬øEn cu√°nto tiempo se recupera la inversi√≥n?
                </v-expansion-panel-title>
                <v-expansion-panel-text class="text-body-2 text-medium-emphasis">
                  Depende del consumo, la tarifa y el tipo de usuario. En muchos
                  casos el retorno se observa en un rango de algunos a√±os, y
                  luego el sistema contin√∫a generando ahorro durante su vida
                  √∫til.
                </v-expansion-panel-text>
              </v-expansion-panel>
            </v-expansion-panels>
          </div>
        </v-container>
      </section>

      <!-- CTA FINAL -->
      <section class="green-cta-section">
        <v-container class="py-10 text-center">
          <div class="cta-title mb-2">
            Empez√° hoy tu proyecto solar
          </div>
          <div class="cta-subtitle mb-6">
            Us√° el simulador para tener una primera referencia y dej√° tus datos
            para recibir una propuesta adaptada a tu realidad.
          </div>

          <v-btn
            variant="outlined"
            size="large"
            class="px-8 py-3 text-button cta-button"
            @click="scrollToCalculator"
          >
            IR AL SIMULADOR
          </v-btn>
        </v-container>
      </section>
    </v-main>
  </v-app>
</template>

<script setup>
import { ref } from 'vue'
import SolarLeadForm from './components/SolarLeadForm.vue'
import ConsumptionCalculator from './components/ConsumptionCalculator.vue'

const activeView = ref('form')
const infoSection = ref(null)

function scrollToCalculator() {
  const el = document.getElementById('green-calculator-section')
  if (el) el.scrollIntoView({ behavior: 'smooth' })
}

function scrollToInfo() {
  const dom =
    infoSection.value?.$el || document.querySelector('[ref="infoSection"]')
  if (dom) dom.scrollIntoView({ behavior: 'smooth' })
}
</script>

<style scoped>
.solar-green-app {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Roboto', sans-serif;
}

/* t√≠tulos secciones */
.section-title {
  font-size: 1.8rem;
  font-weight: 600;
}

.hero-title {
  color: #1a5634;
}

.hero-subtitle {
  max-width: 640px;
}

/* tarjetas beneficios */
.benefit-card {
  border-radius: 14px;
}

.benefit-title {
  color: #1a5634;
  font-weight: 600;
  margin-bottom: 6px;
}

/* wrapper simulador */
.form-wrapper {
  width: 100%;
  display: flex;
  justify-content: center;
  padding: 16px;
}

.form-card {
  max-width: 420px;
  width: 100%;
  border-radius: 18px;
  padding: 24px 22px 20px;
  background: #ffffff;
  border: 1px solid rgba(26, 86, 52, 0.18);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
}

.form-header {
  margin-bottom: 16px;
}

.form-chip {
  display: inline-block;
  padding: 2px 10px;
  border-radius: 999px;
  font-size: 0.7rem;
  font-weight: 600;
  color: #ffffff;
  background-color: #1a5634;
  margin-bottom: 6px;
}

.form-title {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 4px;
}

.form-subtitle {
  font-size: 0.9rem;
  color: #6b6f75;
  margin: 0;
}

/* tabs */
.view-tabs {
  margin-top: 12px;
  display: flex;
  gap: 6px;
  padding: 4px;
  border-radius: 999px;
  background: #f4f7f5;
}

.view-tab {
  flex: 1 1 0;
  border: none;
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 0.78rem;
  font-weight: 600;
  cursor: pointer;
  background: transparent;
  color: #4b4f55;
  transition: all 0.2s ease;
}

.view-tab.active {
  background: #1a5634;
  color: #ffffff;
}

/* link info extra */
.more-info-wrap {
  margin-top: 16px;
  text-align: center;
}

.more-info-btn {
  text-transform: none !important;
  font-weight: 500 !important;
  font-size: 0.82rem !important;
  color: #1a5634 !important;
}

/* pasos */
.step-title {
  font-size: 1rem;
  font-weight: 600;
  color: #1a5634;
  margin-bottom: 6px;
}

/* FAQ panels */
.faq-wrapper {
  max-width: 980px;
  margin: 0 auto;
}

/* Sacamos cualquier sombra heredada de WP */
:deep(.faq-wrapper *) {
  box-shadow: none !important;
}

/* panel base */
:deep(.faq-panels .faq-item) {
  background-color: #ffffff !important;
  border-radius: 12px !important;
  margin-bottom: 10px !important;
  border: 1px solid #1a5634 !important; /* üî• borde VERDE definitivo */
}

/* t√≠tulo del panel */
:deep(.faq-panels .faq-item .v-expansion-panel-title) {
  background-color: transparent !important;
  color: #1a5634 !important;
  font-weight: 500 !important;
  font-size: 0.98rem !important;
  min-height: 52px !important;
  border: none !important;
}

/* overlay hover de Vuetify */
:deep(.faq-panels .v-expansion-panel-title__overlay) {
  background: transparent !important;
}

/* cuando est√° activo: borde verde, pero NO fondo verde */
:deep(.faq-panels .faq-item.v-expansion-panel--active) {
  border-color: #1a5634 !important;
  background-color: #ffffff !important;
}

/* CTA final */
.green-cta-section {
  background-color: #1a5634;
  color: #ffffff;
}

.cta-title {
  font-size: 1.7rem;
  font-weight: 600;
}

.cta-subtitle {
  max-width: 520px;
  margin: 0 auto;
  font-size: 0.95rem;
  opacity: 0.9;
}

.cta-button {
  border-color: #ffffff !important;
  color: #ffffff !important;
}

/* -------- Overrides espec√≠ficos del FORM (botones/textos) -------- */

#solar-calculator :deep(a),
#solar-calculator :deep(button),
#solar-calculator :deep(.v-btn),
#solar-calculator :deep(.v-btn__content) {
  text-decoration: none !important;
}

/* headings internos del form */
#solar-calculator :deep(h2),
#solar-calculator :deep(h3) {
  color: #1a5634;
}

/* bot√≥n principal "Ver mi ahorro..." */
#solar-calculator :deep(.v-btn.v-btn--elevated),
#solar-calculator :deep(.v-btn.v-btn--flat.primary),
#solar-calculator :deep(.v-btn.v-btn--flat.bg-primary) {
  background-color: #1a5634 !important;
  color: #ffffff !important;
  border-radius: 999px !important;
  text-transform: none !important;
  font-weight: 700 !important;
  font-size: 0.95rem !important;
  letter-spacing: 0.02em;
}

/* todos los botones del form redonditos */
#solar-calculator :deep(.v-btn) {
  border-radius: 999px !important;
}

/* inputs */
#solar-calculator :deep(.v-field) {
  border-radius: 14px !important;
}

/* sin sombras fuertes */
#solar-calculator :deep(.v-field),
#solar-calculator :deep(.v-btn) {
  box-shadow: none !important;
}
</style>

